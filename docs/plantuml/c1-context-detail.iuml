@startuml
!define GCPPuml https://raw.githubusercontent.com/Crashedmind/PlantUML-icons-GCP/master/dist
!include GCPPuml/GCPC4Integration.puml
!include GCPPuml/IconPack.puml

!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

title Detailed System Context for Energy Compliance Analyzer

Person(user, "Energy Sector User", "Uploads CSV data, defines analysis parameters, views compliance reports, and interacts via chat.")
System(energyComplianceAnalyzer, "Energy Compliance Analyzer", "The core application providing data analysis, report generation, and user interaction features.")
System_Ext(googleSignIn, "Google Sign-In", "External identity provider for user authentication.")
System_Ext(firebasePlatform, "Firebase Platform (GCP)", "Underlying BaaS including Authentication, Firestore, Storage, Functions, RTDB.")
System_Ext(googleAI, "Google AI (Gemini)", "Provides AI models for data interpretation, regulation identification, report generation, and chat.")
System_Ext(aneelRegulatoryDocs, "ANEEL Regulatory Documents", "External knowledge base of normative resolutions and technical standards.")

Rel(user, energyComplianceAnalyzer, "Accesses and Uses", "HTTPS")
Rel(user, googleSignIn, "Authenticates via", "OAuth2")
Rel(energyComplianceAnalyzer, googleSignIn, "Delegates Authentication to")
Rel(energyComplianceAnalyzer, firebasePlatform, "Built on / Deployed to")
Rel(energyComplianceAnalyzer, googleAI, "Utilizes AI Models from")
Rel(energyComplianceAnalyzer, aneelRegulatoryDocs, "Consults (via AI) for Compliance Rules")

@enduml