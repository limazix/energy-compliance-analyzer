@startuml
!define GCPPuml https://raw.githubusercontent.com/Crashedmind/PlantUML-icons-GCP/master/dist
!include GCPPuml/GCPC4Integration.puml

title Frontend Web App Components (Container: Frontend Web App)

package "UI Components (ShadCN, Custom)" {
    Component(authUI, "Authentication UI", "React Components", "Login/Logout buttons, profile display. Interacts with AuthProvider.")
    Component(fileUploadUI, "Upload UI", "React Components, NewAnalysisForm.tsx", "File selection, metadata input, initiates upload via useFileUploadManager.")
    Component(analysisListUI, "Analysis Listing UI", "React Components, Accordion", "Displays past analyses, uses useAnalysisManager.")
    Component(analysisViewUI, "Analysis View UI", "React Components, AnalysisView.tsx", "Shows details of one analysis, progress, results, tags.")
    Component(reportViewUI, "Report View UI", "React Components, ReportPage.tsx", "Renders MDX report, integrates chat.")
    Component(reportChatUI, "Report Chat UI", "React Components (within ReportPage)", "Handles chat messages, RTDB sync, calls chat Server Action.")
    Component(uiLib, "Reusable UI Library", "ShadCN UI, Lucide Icons", "Buttons, Cards, Inputs, Dialogs etc.")
}

package "State & Logic" {
    Component(stateMgmt, "State & UI Logic", "React Context, Custom Hooks", "AuthProvider, QueryProvider, useAnalysisManager, useFileUploadManager, useToast.")
    Component(routing, "Routing", "Next.js App Router", "Maps URLs to pages, handles navigation.")
}

Component(firebaseClient, "Firebase Client Config", "TypeScript, firebase/app", "Initializes Firebase SDK, provides service instances (Auth, Firestore, Storage, RTDB), handles emulator connections.")

' Relationships (simplified for overview)
authUI --> stateMgmt # Use "useAuth"
fileUploadUI --> stateMgmt # Use "useFileUploadManager"
analysisListUI --> stateMgmt # Use "useAnalysisManager"
analysisViewUI --> stateMgmt # Use "useAnalysisManager"
reportViewUI --> reportChatUI
reportChatUI --> stateMgmt ' May use toasts or global state

stateMgmt --> firebaseClient # AuthProvider uses Firebase Auth
reportChatUI --> firebaseClient # For RTDB

authUI ..> uiLib
fileUploadUI ..> uiLib
analysisListUI ..> uiLib
analysisViewUI ..> uiLib
reportViewUI ..> uiLib

Lay_D(authUI, fileUploadUI)
Lay_D(fileUploadUI, analysisListUI)
Lay_D(analysisListUI, analysisViewUI)
Lay_D(analysisViewUI, reportViewUI)
Lay_D(reportViewUI, reportChatUI)

@enduml
