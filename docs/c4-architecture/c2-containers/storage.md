
# C2 Model: Container Detail - File Storage (Firebase Storage)

[<- Back to Container Overview (C2)](./index.md)

## Description

**Firebase Storage** is a robust, simple, and cost-effective object (blob) storage service built for application scale. In the Energy Compliance Analyzer, it is used to store files uploaded by users and reports generated by the system.

## Responsibilities (Behaviors)

*   **Storage of Uploaded CSV Files:**
    *   Stores the original CSV files containing electrical power quality data uploaded by users via the Frontend Web App.
    *   Each file is typically stored in a path that includes the user ID and analysis ID to ensure organization and access control. (Ex: `user_uploads/{userId}/{analysisId}/{fileName}.csv`).
*   **Storage of Generated MDX Reports:**
    *   Stores the final compliance reports generated by the AI pipeline (Firebase Functions) in MDX (Markdown with JSX) format.
    *   Similar to CSVs, these reports are stored in structured paths (Ex: `user_reports/{userId}/{analysisId}/report.mdx`).
*   **Provision of File Access:**
    *   Allows Firebase Functions to access and read the content of CSV files for processing.
    *   Allows Next.js Server Actions (and, consequently, the frontend) to access and read the content of MDX report files for display to the user.
    *   Provides download URLs for files if needed, although direct SDK access is more common for internal operations.

## Technologies and Constraints

*   **Core Technology:** Firebase Storage (which is built on Google Cloud Storage).
*   **Storage Type:** Object (blob) storage. Not a traditional hierarchical file system, but rather key-value storage where the key is the full file path.
*   **Security:**
    *   Access to files is controlled by Firebase Storage Security Rules.
    *   These rules can define who can upload, download, or delete files based on user authentication, file path, file size, content type, etc.
*   **SDKs:**
    *   The Firebase SDK for client (web) is used by the frontend to perform file uploads (usually directly to Storage or via presigned URLs managed by Server Actions).
    *   The Firebase Admin SDK is used by Firebase Functions and Next.js Server Actions to access files (read CSVs, write MDX) with server privileges.
*   **Path Structure:** While not a file system, naming files with "/" creates an illusion of directory structure, which is useful for organization and applying security rules.
*   **Scalability:** Highly scalable for storing large volumes of data and handling a high volume of upload/download operations.
*   **Costs:** Billing is based on the amount of data stored, network operations (uploads/downloads), and the number of operations (e.g., reads, writes, listings).
*   **Versioning (Optional):** Google Cloud Storage (the foundation of Firebase Storage) supports object versioning, which can be useful for maintaining report histories, although not explicitly detailed as a current requirement for this system.

    